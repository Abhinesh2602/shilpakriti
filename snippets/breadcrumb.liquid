{%- liquid
  assign page_handle = page.handle
  assign enable_post = settings.enable_post
  assign enable_article = settings.enable_article
  assign enable_collection = settings.enable_collection
  assign enable_product = settings.enable_product
  assign listObject = settings.page_breadcrumb | split: ','

  unless enable_post
    assign blog_page = 'blog'
  endunless
  unless enable_article
    assign article_page = 'article'
  endunless
  unless enable_collection
    assign collection_page = 'collection'
  endunless
  unless enable_product
    assign product_page = 'product'
  endunless

  if listObject contains page_handle
    assign showBreadcrumb = false
  else
    assign showBreadcrumb = true
  endif
-%}
{%- if settings.enable_breadcrumb and showBreadcrumb -%}
  {% unless template == 'index' or template == 'cart' or template contains blog_page or template contains article_page or template contains collection_page or template contains product_page %}
    <style>
      .g-breadcrumb {
        border-radius: 0;
        flex-direction: row;
        color: {{ settings.color_breadcrumbs }};
        padding: 6px 0;
        margin: 0;
        background: {{ settings.bg_breadcrumb }};
        border-top: 1px solid{{ settings.border_breadcrumb }};
        white-space: nowrap;
        overflow-x: auto;
      }

      .g-breadcrumb a,
      .g-breadcrumb span {
        padding: 0 3px;
        font-size: 12px;
        line-height: 20px;
        display: inline-block;
      }
      .g-breadcrumb a {
        color: {{ settings.color_breadcrumbs_active }};
      }
      .g-breadcrumb .container,
      .g-breadcrumb .container-fluid {
        z-index: 2;
        position: relative;
      }
      .br-title {
        color: {{ settings.color_breadcrumbs }}
      }
      .br-title svg {
        width: 23px;
        height: 23px;
      }


      @media(min-width: 768px) {
        .g-breadcrumb .container,
        .g-breadcrumb .container-fluid {
          z-index: 2;
          margin: 0 var(--g-gutter);
          position: relative;
        }

        .g-breadcrumb {
          padding: 16px var(--g-gutter);
        }

        .g-breadcrumb container {
          display: inline;
          justify-content: flex-start;
        }

        .g-breadcrumb a,
        .g-breadcrumb span {
          font-size: 16px;
          line-height: 24px;
        }
      }

    </style>

    <nav
      class=" breadcrumb g-breadcrumb text-{{ settings.align_bread }}"
      role="navigation"
      aria-label="breadcrumbs">
      <div class="{{ settings.layout_bread }}">
        <a href="/" title="{{ 'general.breadcrumb.home' | t }}">{{ 'general.breadcrumb.home' | t }}</a>
        {% if template contains 'page' %}
          <span>/</span>
          <span>{{ page.title }}</span>
        {% elsif template contains 'product' %}
          {% if collection.url %}
            <span>/</span>
            {{ collection.title | link_to: collection.url }}
          {% endif %}
          <span>/</span>
          {% assign words = product.title | split: ' ' %}
          <span>
            {% for word in words limit: 3 %}
              {{ word }}
            {% endfor %}...
          </span>
        {% elsif template contains 'collection' and collection.handle %}
          <span>/</span>
          {% if current_tags %}
            {% capture url %}/collections/{{ collection.handle }}{% endcapture %}
            {{ collection.title | link_to: url }}
            <span>/</span>
            <span>{{ current_tags | join: " + " }}</span>
          {% else %}
            <span>{{ collection.title }}</span>
          {% endif %}
        {% elsif template == 'blog' %}
          <span>/</span>
          {% if current_tags %}
            {{ blog.title | link_to: blog.url }}
            <span>/</span>
            <span>{{ current_tags | join: " + " }}</span>
          {% else %}
            <span>{{ blog.title }}</span>
          {% endif %}
        {% elsif template == 'article' %}
          <span>/</span>
          {{ blog.title | link_to: blog.url }}
          <span>/</span>
          <span>{{ article.title }}</span>
        {% else %}
          <span>/</span>
          <span>{{ page_title }}</span>
        {% endif %}
      </div>
    </nav>
  {% endunless %}
{%- endif -%}